var pocetniHTMLNovosti,storage=window.localStorage,user=ucitajLokalno("dani-nastavnika"),neprocitaneNovosti=[],currentEvent="world-skills",skoleDiscipline=[{disciplina:"Agro",skola:"Poljoprivredna, prehrambena i veterinarska škola Stanka Ožanića"},{disciplina:"Cvjećarstvo",skola:"Poljoprivredna, prehrambena i veterinarska škola Stanka Ožanića"},{disciplina:"Pomoćni cvjećar",skola:"Srednja škola- Centar za odgoj i obrazovanje, Zagorska, Zagreb"},{disciplina:"Pekarstvo",skola:"Srednja strukovna škola Antuna Horvata Đakovo"},{disciplina:"Veterina",skola:"Veterinarska škola Zagreb"},{disciplina:"Šumarstvo",skola:"Šumarska i drvodjeljska škola Karlovac"},{disciplina:"Stolarstvo",skola:"Drvodjeljska škola Zagreb"},{disciplina:"Eko laboratorij",skola:"Prirodoslovna škola Vladmira Preloga"},{disciplina:"Izrada modnog proizvoda",skola:"Obrtnička škola Split "},{disciplina:"Modni dizajn i tehnologija",skola:"Obrtnička škola Požega"},{disciplina:"Dizajn obuće i kožne galanterije",skola:"Škola za modu i dizajn Zagreb"},{disciplina:"Grafička tehnologija i dizajn",skola:"Škola za grafiku, dizajn i medijsku produkciju Zagreb"},{disciplina:"Multimedija",skola:"Škola za grafiku, dizajn i medijsku produkciju Zagreb"},{disciplina:"Automehatronika",skola:"Elektrostrojarska i obrtnička škola Selska"},{disciplina:"Kućne instalacije",skola:"Industrijsko obrtnička škola Nova Gradiška"},{disciplina:"Strojarska tehnologija",skola:"STŠ Fausta Vrančića Zagreb"},{disciplina:"CNC i CAD/CAM tehnologije",skola:"STŠ Fausta Vrančića Zagreb"},{disciplina:"Električne instalacije",skola:"Elektrostrojarska i obrtnička škola Selska"},{disciplina:"Izrada programskih rješenja",skola:"Srednja škola Jelkovec"},{disciplina:"Graditeljska tehnologija ",skola:"Graditeljsko-geodetska tehnička škola Split"},{disciplina:"Arhitektonske tehnologije",skola:"Graditeljska škola Čakovec"},{disciplina:"Zidarstvo",skola:"Obrtnička i industrijska graditeljska škola Zagreb"},{disciplina:"Keramičarstvo i oblaganje",skola:"Srednja škola Bedekovčina (Graditeljsko učilište)"},{disciplina:"Suha gradnja",skola:"MIOŠ Karlovac"},{disciplina:"Soboslikarstvo",skola:"Obrtnička i industrijska graditeljska škola Zagreb"},{disciplina:"Geodezija",skola:"Geodetska škola Zagreb"},{disciplina:"Računovodstvo",skola:"Prva ekonomska škola Zagreb"},{disciplina:"Poduzetništvo",skola:"Ekonomska i trgovačka škola Čakovec"},{disciplina:"Prodajne vještine",skola:'Trgovačka i komercijalna škola "Davor Milas"Osijek'},{disciplina:"Poslovanje recepcije hotela",skola:"Ugostiteljsko-turističko učilište Zagreb"},{disciplina:"Poslovanje turističke agencije",skola:"Ugostiteljsko-turističko učilište Zagreb"},{disciplina:"Kuharstvo",skola:"Ugostiteljsko-turističko učilište Zagreb"},{disciplina:"Ugostiteljsko posluživanje",skola:"Ugostiteljsko-turističko učilište Zagreb"},{disciplina:"Slastičarstvo",skola:"Ugostiteljsko-turističko učilište Zagreb"},{disciplina:"Pomoćni kuhar i slastičar",skola:"Ugostiteljsko-turističko učilište Zagreb"},{disciplina:"Prometna tehnologija",skola:"Strojarska i prometna škola Varaždin"},{disciplina:"Pomorska nautika",skola:"Prometno-tehnička škola Šibenik"},{disciplina:"Vožnja motornoga vozila",skola:"Tehnička škola Daruvar"},{disciplina:"Fizioterapija",skola:"Medicinska škola Osijek"},{disciplina:"Zdravstvena njega",skola:"Škola za medicinske sestre Mlinarska"},{disciplina:"Frizerstvo",skola:"Obrtnička škola za osobne usluge Savska"},{disciplina:"Kozmetička njega",skola:"Prirodoslovna škola Vladmira Preloga"},{disciplina:"Robotika",skola:"Tehnička škola Zagreb, Palmotićeva"},{disciplina:"Mehatronika",skola:"Tehnička škola Ruđera Boškovića Zagreb"},{disciplina:"Smotra i sajam VT",skola:"PGEŠ Katarina Zrinski"},{disciplina:"Smotra radova učenika s teškoćama",skola:"Srednja škola - Centar za odgoj i obrazovanje, Zagorska, zagreb"},{disciplina:"Međusektorska smotra radova:",skola:"MIOŠ Karlovac"}],partneriDiscipline=[{disciplina:"Automehatronika",partner:"Intercars+q service, Tokić, Belmet97"},{disciplina:"Keramičarstvo",partner:"Baumit, Texo"},{disciplina:"Soboslikarstvo",partner:"Baumit, Texo"},{disciplina:"Pomorska nautika",partner:"MEP"},{disciplina:"Izrada modnog proizvoda",partner:"Šivanol, Elektroterm Ludbreg"},{disciplina:"Modni dizajn i tehnologija",partner:"Šivanol, Elektroterm Ludbreg"},{disciplina:"Dizajn obuće i kožne galanterije",partner:"Šivanol, Elektroterm Ludbreg"},{disciplina:"Mehatronika",partner:"FESTO, Siemens"},{disciplina:"Pekarstvo",partner:"Klara"},{disciplina:"Izrada programskih rješenja",partner:"Algebra"},{disciplina:"Robotika",partner:"Siemens, Algebra"},{disciplina:"Električne instalacije",partner:"Schrack"},{disciplina:"Kozmetička njega",partner:"DM"},{disciplina:"Suha gradnja",partner:"Radnik Križevci"},{disciplina:"Poslovanje turističke agencije",partner:"Atlas"},{disciplina:"Kuharstvo",partner:"Amadria Park"},{disciplina:"Pomoćni kuhar",partner:"Amadria Park"},{disciplina:"Slastičarstvo",partner:"Amadria Park"},{disciplina:"Ugostiteljsko posluživanje",partner:"Amadria Park"},{disciplina:"Poslovanje hotelske recepcije",partner:"Amadria Park"},{disciplina:"Grafička tehnologija i dizajn",partner:"Ozbiljna Agencija"},{disciplina:"Multimedija",partner:"Algebra"},{disciplina:"Računovodstvo",partner:"Dudi speed"},{disciplina:"Partneri događanja",partner:"Grad Zagreb, Hrvatska obrtnička komora, INA"}],provjera={raspored:0,novosti:0,predavanja:0,predavaci:0};function ucitajRaspored(){$.ajax({dataType:"json",url:server+projekt,data:{akcija:"ucitaj raspored"},method:"post",success:function(a){for(var i in a)a[i].event==currentEvent&&unesiPredavanje(a[i]);for(var e in raspored)rasporedDatum.hasOwnProperty(raspored[e].getDatumPocetka())||(rasporedDatum[raspored[e].getDatumPocetka()]=[]),rasporedDatum[raspored[e].getDatumPocetka()].push(raspored[e]);for(var o in rasporedDatum)rasporedDatum[o].sort(function(a,i){return a.getVrijemePocetka()>i.getVrijemePocetka()?1:-1});provjera.raspored=1,console.log("Raspored"),console.log(raspored)}})}function ucitajNovosti(){$.ajax({dataType:"json",url:server+projekt,data:{akcija:"ucitaj novosti"},method:"post",success:function(a){for(var i in a)a[i].event==currentEvent&&unesiObavijest(a[i]);var o;provjera.novosti=1,console.log("Novosti"),console.log(novosti),setTimeout(function(){if(0<novosti.length){pocetniHTMLNovosti=$(".obavijest-wrap").html();var a=0;if(null!=user){if(user.hasOwnProperty("novosti"))for(var i in novosti)user.novosti.includes(novosti[i].getId())||(a++,o=novosti[i],neprocitaneNovosti.push(novosti[i].getId()))}else{for(var e in novosti)neprocitaneNovosti.push(novosti[e].getId());o=novosti[Number(novosti.length)-1],a=Number(novosti.length)}0<a&&upisiNovuObavijest(o,a)}},0)}})}function ucitajPredavanja(){$.ajax({dataType:"json",url:server+projekt,data:{akcija:"ucitaj predavanja"},method:"post",success:function(a){for(var i in a)a[i].event==currentEvent&&unesiRadionicu(a[i]);for(var e in provjera.predavanja=1,console.log("Predavanja"),console.log(predavanja),predavanja)predavanjaDatum.hasOwnProperty(predavanja[e].getDatumPocetka())||(predavanjaDatum[predavanja[e].getDatumPocetka()]=[]),predavanjaDatum[predavanja[e].getDatumPocetka()].push(predavanja[e]);for(var o in predavanjaDatum)predavanjaDatum[o].sort(function(a,i){return a.getVrijemePocetka()>i.getVrijemePocetka()?1:-1})}})}function ucitajPredavace(){$.ajax({dataType:"json",url:server+projekt,data:{akcija:"ucitaj predavace",order:"predavacPrezime"},method:"post",success:function(a){for(var i in a)a[i].event==currentEvent&&unesiPredavaca(a[i]);provjera.predavaci=1,setTimeout(function(){sortirajPredavace(),console.log("Predavači"),console.log(predavaci)},0)}})}function ucitajSkole(){var a="";for(var i in skoleDiscipline)a+='\n            <div class="skola">\n                <div class="skola-naslov">'.concat(skoleDiscipline[i].skola,'</div>\n                <div class="disciplina-naslov">').concat(skoleDiscipline[i].disciplina,"</div>\n            </div>\n        ");$(".skole-append").html(a)}function ucitajPartnere(){var a="";for(var i in partneriDiscipline)a+='\n            <div class="skola">\n                <div class="skola-naslov">'.concat(partneriDiscipline[i].partner,'</div>\n                <div class="disciplina-naslov">').concat(partneriDiscipline[i].disciplina,"</div>\n            </div>\n        ");$(".partneri-append").html(a)}function ucitajDiscipline(){return new Promise(function(r,a){$.ajax({dataType:"json",url:server+projekt,data:{akcija:"ucitaj discipline"},method:"post",success:function(a){for(var i in a)a[i].event==currentEvent&&unesiDisciplinu(a[i],!0);var e="";for(var o in e+="<option selected disabled>Odaberite disciplinu</option>",discipline)e+='<option value="'.concat(discipline[o].getId(),'">').concat(discipline[o].getNaziv(),"</option>");$("#ucenikDisciplina").html(e),console.log("Discipline"),console.log(discipline),r(discipline)}})})}function ucitajMentore(){return new Promise(function(a,i){$.ajax({dataType:"json",url:server+projekt,data:{akcija:"ucitaj mentore"},method:"post",success:function(o){new Promise(function(a,i){for(var e in o)o[e].event==currentEvent&&unesiMentora(o[e],!0,!1);a(mentori)}).then(function(){console.log("Mentori"),console.log(mentori),a(mentori)})}})})}function ucitajUcenike(){$.ajax({dataType:"json",url:server+projekt,data:{akcija:"ucitaj ucenike"},method:"post",success:function(a){for(var i in a)a[i].event==currentEvent&&unesiUcenika(a[i],!0);console.log("Učenici"),console.log(ucenici)}})}function unesiPredavanje(a){raspored.push(new Predavanje(a.id,a.sadrzaj))}function unesiObavijest(a){novosti.push(new Obavijest(a.id,a.naslovObavijesti,a.tekstObavijesti,a.kreiran))}function unesiRadionicu(a){predavanja.push(new Stavka(a.id,a.sadrzaj))}function unesiPredavaca(a){predavaci.push(new Predavac(a.id,a.predavacIme,a.predavacPrezime,a.predavacPredavanja,a.predavacSlika,a.predavacZivotopis))}function unesiDisciplinu(a){discipline.push(new Disciplina(a.id,a.sadrzaj))}function unesiMentora(a){mentori.push(new Mentor(a.id,a.sadrzaj))}function unesiUcenika(a,i){ucenici.push(new Ucenik(a.id,a.sadrzaj))}function sortirajPredavace(){var a,i=["a","b","c","č","ć","d","dž","đ","e","f","g","h","i","j","k","l","lj","m","n","nj","o","ö","p","r","s","š","t","u","v","w","z","ž"];do{a=!1;for(var e=0;e<predavaci.length-1;e++){for(var o=0;o<2;o++){39==predavaci[e].getId()&&predavaci[e+1].getId();var r=i.indexOf(predavaci[e].getPrezime()[o].toLowerCase()),n=i.indexOf(predavaci[e==predavaci.length-1?0:e+1].getPrezime()[o].toLowerCase());if(r!=n)break}if(n<r){39==predavaci[e].getId()&&predavaci[e+1].getId();var t=predavaci[e];predavaci[e]=predavaci[e+1],predavaci[e+1]=t,a=!0}}}while(a)}function upisiNovuObavijest(a,i){$(".naslov-obavijesti").html(a.getNaslov()),$(".datum-obavijesti").html(a.getLijepiDatum()),$(".tekst-obavijesti").html(a.getShortTekst()),$(".nove-obavijesti-naslov .broj-obavijesti").html("(".concat(i,")"))}function home(){aktivnaStranica="home",$(".header h1").html("WorldSkills Croatia 2019."),$("#sadrzaj").removeClass("active"),$("#sadrzaj").scrollTop(0),$(".header").removeClass("sivo").removeClass("plavo"),$(".nav_icons").removeClass("aktiv-nav"),$(".header-ikona").attr("data-id","nav")}function prikaziGresku(a,i){var e=a.find(".greska");void 0!==e&&e.html(i)}function sejvajLokalno(a,i){storage.setItem(a,i)}function ucitajLokalno(a){var i=storage.getItem(a);return JSON.parse(i)}function obrisiLokalno(a){storage.removeItem(a)}function initMap(){var a={lat:43.6944,lng:15.8851},i=new google.maps.Map(document.getElementById("map"),{zoom:16,center:a});new google.maps.Marker({position:a,map:i})}$(function(){!function(){ucitajRaspored(),ucitajNovosti(),ucitajPredavanja(),ucitajSkole(),ucitajPartnere(),setTimeout(function(){ucitajPredavace()},0),ucitajDiscipline().then(function(){return ucitajMentore()}).then(function(){ucitajUcenike()});var a=setInterval(function(){0!=provjera.raspored&&0!=provjera.novosti&&0!=provjera.predavanja&&0!=provjera.predavaci&&($(".loading-window").hide(),clearInterval(a))},100)}(),$(".nav-link").click(function(){var a=$(this).attr("data-id");aktivnaStranica!=a&&nadiElement(stranice,a).ucitajStranicu()}),$(".header-ikona").click(function(){switch($(this).attr("data-id")){case"nav":$(".nav-sidebar").addClass("active"),$(".nav-overlay").addClass("active");break;case"back":home();break;case"raspored":$(".predavac-sidebar").removeClass("active"),$(".header h1").html("Raspored"),$(this).attr("data-id","back")}}),$(".zatvori-nav").click(function(){$(".nav-sidebar").removeClass("active"),$(".nav-overlay").removeClass("active")}),$(".sadrzaj").on("click",".predavaci-predavanja-link",function(){var a=$(this).attr("data-id");$(".header-ikona").attr("data-id","raspored");var i=nadiElement(predavaci,a);$(".header h1").html(i.getImePrezime()),$(".predavac-sidebar").html(i.constructSidebar()),setTimeout(function(){$(".predavac-sidebar").addClass("active")},100)}),$(".sadrzaj").on("click",".vise-button",function(){var a=$(this).attr("data-id"),i=$(this).attr("data-akcija"),e=nadiElement(novosti,a);switch(i){case"vise":$(".obavijest[data-id=".concat(a,"] .tekst-obavijesti")).html(e.getTekst()),$(this).attr("data-akcija","manje");break;case"manje":$(".obavijest[data-id=".concat(a,"] .tekst-obavijesti")).html(e.getShortTekst()),$(this).attr("data-akcija","vise")}}),$(".sadrzaj").on("click",".collapse-btn",function(){var a=$(this).attr("data-id"),i=$(this).attr("data-akcija"),e=$(".collapse-elem[data-id=".concat(a,"]"));switch(i){case"prikazi":e.animate({height:e.get(0).scrollHeight},300,function(){$(this).height("auto")}),e.addClass("collapsed"),$(this).attr("data-akcija","sakrij").addClass("collapsed");break;case"sakrij":e.animate({height:"0px"},300),e.removeClass("collapsed"),$(this).attr("data-akcija","prikazi").removeClass("collapsed")}})});